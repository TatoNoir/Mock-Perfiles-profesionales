<div class="modal-overlay" *ngIf="isOpen" (click)="onBackdropClick($event)">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Comentarios de {{ userName }}</h2>
      <button class="close-btn" (click)="onClose()" aria-label="Cerrar modal">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <div class="modal-body">
      <ng-container *ngIf="questions && questions.length > 0; else noComments">
        <div class="comments-list">
          <div class="comment" *ngFor="let q of questions">
            <img class="mini" src="https://i.pravatar.cc/40?u={{q.email}}" alt="" />
            <div class="comment-content">
              <div class="comment-header">
                <strong>{{ q.name }}</strong>
                <span class="muted">{{ q.email }}</span>
              </div>
              <div class="comment-date muted">{{ q.created_at | date:'dd/MM/yyyy HH:mm' }}</div>
              <div class="comment-question">
                <span class="muted">Pregunta:</span> {{ q.message }}
              </div>
              <div class="comment-answer" *ngIf="q.answer">
                <span class="muted">Respuesta:</span> {{ q.answer }}
              </div>
            </div>
            <div class="comment-actions">
              <button class="icon-btn" title="Editar respuesta" aria-label="Editar respuesta" (click)="$event.stopPropagation(); onEdit(q)">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 20h9"/>
                  <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4Z"/>
                </svg>
              </button>
              <button class="icon-btn danger" title="Eliminar comentario" aria-label="Eliminar comentario" (click)="$event.stopPropagation(); onDelete(q)">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="3 6 5 6 21 6"/>
                  <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
                  <path d="M10 11v6"/>
                  <path d="M14 11v6"/>
                  <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </ng-container>
      
      <ng-template #noComments>
        <div class="no-comments">
          <p class="muted">AÃºn no hay comentarios para este usuario</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>
