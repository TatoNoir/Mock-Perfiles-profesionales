<div class="dashboard">
  <h1 class="dashboard-title">Dashboard Principal</h1>
  
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando datos del dashboard...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-state">
    <p>{{ error }}</p>
    <button class="retry-button" (click)="loadDashboardData()">Reintentar</button>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!loading && !error && stats">
    <!-- Summary Cards -->
    <div class="summary-cards">
      <div class="summary-card">
        <div class="card-icon">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
          </svg>
        </div>
        <div class="card-content">
          <div class="card-number">{{ stats.totalProfessionals }}</div>
          <div class="card-text">Total de profesionales registrados</div>
        </div>
      </div>

      <div class="summary-card">
        <div class="card-icon">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
          </svg>
        </div>
        <div class="card-content">
          <div class="card-number">{{ stats.newRegistrationsThisWeek }}</div>
          <div class="card-text">Nuevos registros esta semana</div>
        </div>
      </div>

      <div class="summary-card">
        <div class="card-icon">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
          </svg>
        </div>
        <div class="card-content">
          <div class="card-number">{{ stats.contactsSent }}</div>
          <div class="card-text">Total de comentarios</div>
        </div>
      </div>

      <div class="summary-card">
        <div class="card-icon">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          </svg>
        </div>
        <div class="card-content">
          <div class="card-number">{{ stats.mostSearchedSpecialty }}</div>
          <div class="card-text">Total de valoraciones</div>
        </div>
      </div>
    </div>

    <!-- Data Table -->
    <div class="data-table-container">
      <div class="table-header"><h3 class="table-title">Ãšltimos usuarios registrados</h3></div>
      <table class="data-table">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Rol</th>
            <th>Provincia</th>
            <th>Localidad</th>
            <th>Estado</th>
            <th>Fecha de registro</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of recentUsers">
            <td>{{ user.name }}</td>
            <td>{{ user.role }}</td>
            <td>{{ user.province }}</td>
            <td>{{ user.locality }}</td>
            <td>
              <span class="status-badge" [class.active]="user.status === 'active'" [class.inactive]="user.status === 'inactive'">
                {{ user.status === 'active' ? 'Activo' : 'Inactivo' }}
              </span>
            </td>
            <td>{{ user.registrationDate }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
